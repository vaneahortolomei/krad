#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# npx --no -- commitlint --edit "$1"
message="$(cat $1)"

requiredEmojis="^(:bug:|ğŸ›|:rotating_light:|ğŸš¨|:zap:|âš¡ï¸|:pencil2:|âœï¸|:recycle:|â™»ï¸|:sparkles:|âœ¨|:wastebasket:|ğŸ—‘ï¸|:package:|ğŸ“¦ï¸|:art:|ğŸ¨|:construction:|ğŸš§|:white_check_mark:|âœ…|:memo:|ğŸ“|:rocket:|ğŸš€|:arrow_up:|â¬†ï¸|:arrow_down:|â¬‡ï¸|:twisted_rightwards_arrows:|ğŸ”€)"
if ! [[ $message =~ $requiredEmojis ]];
then
  echo "âŒ Wrong commit message! ğŸ˜•"
  echo "âŒ The commit message must have this format:"
  echo "ğŸš¨ <emoji> <commit-message>"
  echo "â—ï¸Allowed emojis and their descriptions:"
  echo "  ğŸ› - Fix a bug
  ğŸš¨ - Critical hotfix
  âš¡ï¸ - Performance improvement
  âœï¸ - Update/Fix typo
  â™»ï¸ - Refactor code
  âœ¨ - Introduce new features
  ğŸ—‘ï¸ - Deprecate code that needs to be cleaned up
  ğŸ“¦ï¸ - Add or update compiled files or packages
  ğŸ¨ - Add or update the UI and styles
  ğŸš§ - Work in progress (NOT READY)
  âœ… - Add/Update tests (or any related change to testing infrastructure)
  ğŸ“ - Add/Update documentation or release notes
  ğŸš€ - Deploy stuff/release
  â¬†ï¸ - Upgrade dependencies
  â¬‡ï¸ - Downgrade dependencies"
  echo "âŒ Example: :sparkles: Add new feature"
  echo "âŒ Your commit message was:"
  echo "$message"
  exit 1
fi
